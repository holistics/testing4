Dashboard repro_pop_relative {
  title: '[Repro] PoP Relative'

  block v1: VizBlock {
    label: 'GMV by Day'
    viz: LineChart {
      dataset: demo_ecommerce
      x_axis: VizFieldFull {
        ref: ref('order_master', 'order_created_at')
        transformation: 'datetrunc day'
        format { type: 'date' }
      }
      y_axis {
        series {
          field: VizFieldFull {
            ref: ref('order_master', 'gmv')
            aggregation: 'sum'
            format { type: 'number' }
          }
        }
      }
    }
  }

  block p1: PopBlock {
    label: 'Compare To'
    default {
      type: 'relative'
      duration: 1
      granularity: 'month'
      show_growth_rate: true
    }
  }

  interactions: [
    PopInteraction {
      from: 'p1'
      to: [
        CustomMapping {
          block: 'v1'
          field: ref('order_master', 'order_created_at')
        }
      ]
    }
  ]

  view: CanvasLayout {
    label: 'View 1'
    height: 500
    grid_size: 10

    block p1 { position: pos(20, 20, 300, 100) layer: 1 }
    block v1 { position: pos(20, 140, 1000, 320) layer: 1 }
  }
}
